<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Batumi Grand Towers - Premier Apartment Rentals</title>
    
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary-color: #0077b6;
            --secondary-color: #023e8a;
            --accent-color: #ffb703;
            --text-dark: #0d1b2a;
            --text-light: #6c757d;
            --background-light: #f8f9fa;
            --white: #ffffff;
            --border-color: #dee2e6;
            --shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            --shadow-light: 0 5px 15px rgba(0, 0, 0, 0.07);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--background-light);
            color: var(--text-dark);
            line-height: 1.7;
        }

        /* Vue Transition Effects */
        .fade-enter-active, .fade-leave-active {
            transition: opacity 0.5s ease;
        }
        .fade-enter-from, .fade-leave-to {
            opacity: 0;
        }
        .slide-fade-enter-active {
            transition: all 0.3s ease-out;
        }
        .slide-fade-leave-active {
            transition: all 0.3s cubic-bezier(1, 0.5, 0.8, 1);
        }
        .slide-fade-enter-from,
        .slide-fade-leave-to {
            transform: translateY(-20px);
            opacity: 0;
        }

        /* Main App Container */
        #app {
            transition: filter 0.3s ease;
        }
        #app.modal-open {
            filter: blur(5px);
        }

        /* Header */
        .header {
            background: var(--white);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: var(--shadow-light);
            border-bottom: 1px solid var(--border-color);
        }
        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .logo {
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            font-weight: 700;
            color: var(--secondary-color);
        }
        .nav-links, .lang-selector {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }
        .nav-links a {
            text-decoration: none;
            color: var(--text-dark);
            font-weight: 500;
            position: relative;
            padding: 0.5rem 0;
        }
        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background-color: var(--primary-color);
            transition: width 0.3s ease;
        }
        .nav-links a:hover::after {
            width: 100%;
        }
        .lang-btn {
            background: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-light);
            padding: 0.5rem 1rem;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        .lang-btn.active, .lang-btn:hover {
            background: var(--primary-color);
            color: var(--white);
            border-color: var(--primary-color);
        }
        
        /* Hero Section */
        .hero {
            background: linear-gradient(rgba(13, 27, 42, 0.6), rgba(13, 27, 42, 0.6)), url('https://images.unsplash.com/photo-1618773928121-c32242e63f39?q=80&w=2070&auto=format&fit=crop') center/cover no-repeat;
            height: 90vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: var(--white);
            padding: 0 2rem;
        }
        .hero-content h1 {
            font-family: 'Playfair Display', serif;
            font-size: clamp(2.5rem, 6vw, 4.5rem);
            margin-bottom: 1rem;
            text-shadow: 0 2px 10px rgba(0,0,0,0.5);
        }
        .hero-content p {
            font-size: clamp(1rem, 2.5vw, 1.5rem);
            max-width: 800px;
            margin: 0 auto;
            opacity: 0.9;
        }

        /* Booking Form */
        .booking-form-wrapper {
            background-color: var(--background-light);
            padding: 4rem 0;
        }
        .booking-form {
            max-width: 1200px;
            margin: -150px auto 0;
            position: relative;
            z-index: 10;
            background: var(--white);
            padding: 2.5rem;
            border-radius: 20px;
            box-shadow: var(--shadow);
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            align-items: end;
        }
        .form-group {
            display: flex;
            flex-direction: column;
        }
        .form-group label {
            margin-bottom: 0.75rem;
            font-weight: 500;
            color: var(--text-dark);
        }
        .form-group input, .form-group select {
            padding: 1rem;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 1rem;
            font-family: 'Inter', sans-serif;
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(0, 119, 182, 0.1);
        }
        .search-btn {
            background: var(--accent-color);
            color: var(--text-dark);
            border: none;
            padding: 1rem;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease, background-color 0.3s;
            height: calc(3.25rem); /* Align height with inputs */
        }
        .search-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(255, 183, 3, 0.4);
            background-color: #ffc107;
        }

        /* General Container */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 6rem 2rem;
        }
        .section-title {
            text-align: center;
            font-family: 'Playfair Display', serif;
            font-size: 2.8rem;
            margin-bottom: 1rem;
        }
        .section-subtitle {
            text-align: center;
            font-size: 1.1rem;
            color: var(--text-light);
            max-width: 600px;
            margin: 0 auto 4rem auto;
        }

        /* Rooms Grid */
        .rooms-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2.5rem;
        }
        .room-card {
            background: var(--white);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: var(--shadow-light);
            display: flex;
            flex-direction: column;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .room-card:hover {
            transform: translateY(-15px);
            box-shadow: var(--shadow);
        }
        .room-image-wrapper {
            position: relative;
        }
        .room-image {
            width: 100%;
            height: 250px;
            object-fit: cover;
        }
        .room-price {
            position: absolute;
            bottom: 1rem;
            right: 1rem;
            background: rgba(13, 27, 42, 0.8);
            color: var(--white);
            padding: 0.5rem 1rem;
            border-radius: 50px;
            font-weight: 700;
            font-size: 1.2rem;
            backdrop-filter: blur(5px);
        }
        .room-content {
            padding: 1.5rem;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }
        .room-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.6rem;
            margin-bottom: 0.5rem;
        }
        .room-description {
            color: var(--text-light);
            margin-bottom: 1rem;
            flex-grow: 1;
        }
        .amenities {
            display: flex;
            gap: 1.5rem;
            flex-wrap: wrap;
            margin-bottom: 1.5rem;
            color: var(--text-light);
        }
        .book-btn {
            width: 100%;
            padding: 1rem;
            border: none;
            background: var(--primary-color);
            color: var(--white);
            font-size: 1rem;
            font-weight: 700;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.3s, transform 0.2s;
        }
        .book-btn:hover {
            background: var(--secondary-color);
            transform: scale(1.02);
        }
        
        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(13, 27, 42, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            backdrop-filter: blur(5px);
        }
        .modal-content {
            background: var(--white);
            padding: 2.5rem;
            border-radius: 15px;
            width: 90%;
            max-width: 500px;
            box-shadow: var(--shadow);
            position: relative;
        }
        .modal-close-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: transparent;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-light);
        }
        .modal-title {
            font-family: 'Playfair Display', serif;
            margin-bottom: 2rem;
            text-align: center;
        }
        .modal-summary p {
            margin-bottom: 0.5rem;
        }
        .modal-form {
            margin-top: 1.5rem;
        }
    </style>
</head>
<body>

<div id="app" :class="{ 'modal-open': isModalVisible }">
    
    <header class="header">
        <div class="nav-container">
            <div class="logo">Batumi Grand</div>
            <nav class="nav-links">
                <a href="#rooms" v-text="t('ourRooms')"></a>
                <a href="#footer" v-text="t('contactUs')"></a>
            </nav>
            <div class="lang-selector">
                <button v-for="lang in availableLangs" :key="lang.code" 
                        @click="changeLanguage(lang.code)"
                        :class="{ active: currentLang === lang.code }"
                        class="lang-btn">
                    {{ lang.name }}
                </button>
            </div>
        </div>
    </header>

    <main>
        <section class="hero">
            <div class="hero-content">
                <h1 v-text="t('heroTitle')"></h1>
                <p v-text="t('heroSubtitle')"></p>
            </div>
        </section>

        <div id="booking-form" class="booking-form-wrapper">
             <form @submit.prevent="searchAvailability" class="booking-form">
                <div class="form-group">
                    <label v-text="t('checkIn')"></label>
                    <input type="date" v-model="search.checkIn" :min="today" required>
                </div>
                <div class="form-group">
                    <label v-text="t('checkOut')"></label>
                    <input type="date" v-model="search.checkOut" :min="search.checkIn || today" required>
                </div>
                <div class="form-group">
                    <label v-text="t('guests')"></label>
                    <select v-model.number="search.guests">
                        <option v-for="n in 5" :value="n">{{ n }}</option>
                    </select>
                </div>
                <button type="submit" class="search-btn" v-text="t('searchBtn')"></button>
            </form>
        </div>

        <div id="rooms" class="container">
            <h2 class="section-title" v-text="t('ourRooms')"></h2>
            <p class="section-subtitle" v-text="t('roomsSubtitle')"></p>
            
            <transition name="slide-fade" mode="out-in">
                <div v-if="filteredRooms.length > 0" class="rooms-grid">
                    <div v-for="room in filteredRooms" :key="room.id" class="room-card">
                        <div class="room-image-wrapper">
                            <img :src="room.imageUrl" :alt="room.title[currentLang]" class="room-image">
                            <div class="room-price">${{ room.price }} <span style="font-size: 0.9rem;">/{{ t('night') }}</span></div>
                        </div>
                        <div class="room-content">
                            <h3 class="room-title">{{ room.title[currentLang] }}</h3>
                            <p class="room-description">{{ room.description[currentLang] }}</p>
                            <div class="amenities">
                                <span>🛏️ {{ room.amenities.beds }} {{ t('beds') }}</span>
                                <span v-if="room.amenities.wifi">📶 WiFi</span>
                                <span v-if="room.amenities.kitchen">🍳 {{ t('kitchen') }}</span>
                                <span v-if="room.amenities.seaview">🌊 {{ t('seaview') }}</span>
                            </div>
                            <button @click="openBookingModal(room)" class="book-btn" v-text="t('bookNow')"></button>
                        </div>
                    </div>
                </div>
                <div v-else>
                    <p class="section-subtitle">{{ t('noRooms') }}</p>
                </div>
            </transition>
        </div>
    </main>

    <footer id="footer" class="footer" style="background-color: var(--text-dark); color: var(--white); padding: 4rem 2rem; text-align: center;">
         <div class="logo" style="color: var(--white); margin-bottom: 2rem;">Batumi Grand</div>
         <p>+995 123 456 789  •  bookings@batumigrand.com</p>
         <p style="margin-top: 2rem; opacity: 0.7;">&copy; {{ new Date().getFullYear() }} Batumi Grand. {{ t('rights') }}</p>
    </footer>

    <transition name="fade">
        <div v-if="isModalVisible" class="modal-overlay" @click.self="closeBookingModal">
            <div class="modal-content">
                <button @click="closeBookingModal" class="modal-close-btn">&times;</button>
                
                <transition name="slide-fade" mode="out-in">
                    <div v-if="!bookingSuccess" key="form">
                        <h2 class="modal-title">{{ t('confirmBooking') }}</h2>
                        <div class="modal-summary">
                            <p><strong>{{ t('room') }}:</strong> {{ selectedRoom.title[currentLang] }}</p>
                            <p><strong>{{ t('checkIn') }}:</strong> {{ new Date(search.checkIn).toLocaleDateString() }}</p>
                            <p><strong>{{ t('checkOut') }}:</strong> {{ new Date(search.checkOut).toLocaleDateString() }}</p>
                            <p><strong>{{ t('guests') }}:</strong> {{ search.guests }}</p>
                            <p><strong>{{ t('totalPrice') }}:</strong> ${{ calculateTotalPrice() }}</p>
                        </div>
                        <form @submit.prevent="finalizeBooking" class="modal-form">
                            <div class="form-group">
                                <label>{{ t('fullName') }}</label>
                                <input type="text" v-model="bookingDetails.name" required>
                            </div>
                            <div class="form-group" style="margin-top: 1rem;">
                                <label>Email</label>
                                <input type="email" v-model="bookingDetails.email" required>
                            </div>
                            <button type="submit" class="book-btn" style="width: 100%; margin-top: 2rem;">{{ t('completeBooking') }}</button>
                        </form>
                    </div>
                    <div v-else key="success">
                        <h2 class="modal-title">✅ {{ t('bookingConfirmed') }}</h2>
                        <p style="text-align: center;">{{ t('bookingSuccessMsg') }}</p>
                        <button @click="closeBookingModal" class="book-btn" style="width: 100%; margin-top: 2rem;">{{ t('close') }}</button>
                    </div>
                </transition>
            </div>
        </div>
    </transition>

</div>

<script>
    // Translations Object
    const translations = {
        en: {
            ourRooms: "Our Apartments",
            contactUs: "Contact Us",
            heroTitle: "Experience Batumi From The Top",
            heroSubtitle: "Luxury rentals with unparalleled sea views and five-star amenities.",
            checkIn: "Check-in Date",
            checkOut: "Check-out Date",
            guests: "Guests",
            searchBtn: "Check Availability",
            roomsSubtitle: "Select your dates to find the perfect available apartment for your stay.",
            night: "night",
            beds: "Beds",
            kitchen: "Kitchen",
            seaview: "Sea View",
            bookNow: "Reserve Now",
            noRooms: "No apartments available for the selected dates. Please try different dates.",
            rights: "All Rights Reserved.",
            confirmBooking: "Confirm Your Reservation",
            room: "Room",
            totalPrice: "Total Price",
            fullName: "Full Name",
            completeBooking: "Complete Booking",
            bookingConfirmed: "Booking Confirmed!",
            bookingSuccessMsg: "Thank you! A confirmation email has been sent to your address.",
            close: "Close"
        },
        ka: {
            ourRooms: "ჩვენი აპარტამენტები",
            contactUs: "კონტაქტი",
            heroTitle: "განიცადე ბათუმი სიმაღლიდან",
            heroSubtitle: "ლუქს კლასის აპარტამენტები ზღვის ხედით და ხუთვარსკვლავიანი სერვისით.",
            checkIn: "შესვლის თარიღი",
            checkOut: "გასვლის თარიღი",
            guests: "სტუმრები",
            searchBtn: "შეამოწმე ხელმისაწვდომობა",
            roomsSubtitle: "აირჩიეთ თარიღები თქვენი დასვენებისთვის იდეალური ბინის მოსაძებნად.",
            night: "ღამე",
            beds: "საწოლი",
            kitchen: "სამზარეულო",
            seaview: "ზღვის ხედი",
            bookNow: "დაჯავშნე",
            noRooms: "მითითებულ თარიღებზე თავისუფალი ბინები არ არის. გთხოვთ, სცადოთ სხვა თარიღები.",
            rights: "ყველა უფლება დაცულია.",
            confirmBooking: "დაადასტურეთ ჯავშანი",
            room: "აპარტამენტი",
            totalPrice: "სრული ფასი",
            fullName: "სრული სახელი",
            completeBooking: "ჯავშნის დასრულება",
            bookingConfirmed: "ჯავშანი დადასტურებულია!",
            bookingSuccessMsg: "გმადლობთ! დამადასტურებელი წერილი გამოგზავნილია თქვენს მეილზე.",
            close: "დახურვა"
        }
    };

    // --- BROWSER DATABASE SIMULATION using localStorage ---
    const Database = {
        getRooms() {
            let rooms = JSON.parse(localStorage.getItem('rooms'));
            if (!rooms) {
                rooms = this.seedRooms();
            }
            return rooms;
        },
        getBookings() {
            return JSON.parse(localStorage.getItem('bookings')) || [];
        },
        saveBooking(booking) {
            const bookings = this.getBookings();
            bookings.push(booking);
            localStorage.setItem('bookings', JSON.stringify(bookings));
        },
        seedRooms() {
            const initialRooms = [
                { id: 1, title: {en: "Azure Horizon Suite", ka: "ლურჯი ჰორიზონტის ლუქსი"}, description: {en: "A stunning suite offering breathtaking panoramic views of the Black Sea.", ka: "განსაცვიფრებელი ლუქსი შავი ზღვის პანორამული ხედებით."}, price: 150, imageUrl: "https://images.unsplash.com/photo-1611892440504-42a792e24d32?q=80&w=2070&auto=format&fit=crop", amenities: {beds: 2, wifi: true, kitchen: true, seaview: true} },
                { id: 2, title: {en: "City Lights Loft", ka: "ქალაქის შუქების ლოფტი"}, description: {en: "Modern and stylish loft perfect for urban explorers, with a dazzling city view.", ka: "თანამედროვე ლოფტი ქალაქის მკვლევრებისთვის, ბრწყინვალე ხედით."}, price: 120, imageUrl: "https://images.unsplash.com/photo-1596394516093-501ba68a0ba6?q=80&w=2070&auto=format&fit=crop", amenities: {beds: 1, wifi: true, kitchen: true, seaview: false} },
                { id: 3, title: {en: "Grand Family Residence", ka: "დიდი საოჯახო რეზიდენცია"}, description: {en: "Spacious two-bedroom residence for families seeking comfort and luxury.", ka: "ფართო ოროთახიანი რეზიდენცია ოჯახებისთვის."}, price: 220, imageUrl: "https://images.unsplash.com/photo-1560185893-a55de8537e4f?q=80&w=1974&auto=format&fit=crop", amenities: {beds: 3, wifi: true, kitchen: true, seaview: true} }
            ];
            localStorage.setItem('rooms', JSON.stringify(initialRooms));
            return initialRooms;
        }
    };

    // --- VUE.JS APPLICATION ---
    const app = Vue.createApp({
        data() {
            return {
                currentLang: 'en',
                availableLangs: [{code: 'en', name: 'EN'}, {code: 'ka', name: 'GE'}],
                allRooms: [],
                filteredRooms: [],
                bookings: [],
                search: {
                    checkIn: '',
                    checkOut: '',
                    guests: 1
                },
                isModalVisible: false,
                selectedRoom: null,
                bookingDetails: {
                    name: '',
                    email: ''
                },
                bookingSuccess: false
            }
        },
        computed: {
            today() {
                // Returns today's date in YYYY-MM-DD format
                return new Date().toISOString().split('T')[0];
            }
        },
        methods: {
            t(key) {
                return translations[this.currentLang][key] || key;
            },
            changeLanguage(lang) {
                this.currentLang = lang;
            },
            searchAvailability() {
                if (!this.search.checkIn || !this.search.checkOut) {
                    alert('Please select both check-in and check-out dates.');
                    return;
                }

                const searchStart = new Date(this.search.checkIn);
                const searchEnd = new Date(this.search.checkOut);

                if (searchStart >= searchEnd) {
                    alert('Check-out date must be after the check-in date.');
                    return;
                }

                const available = this.allRooms.filter(room => {
                    const conflictingBooking = this.bookings.find(booking => {
                        if (booking.roomId !== room.id) return false;
                        const bookingStart = new Date(booking.checkIn);
                        const bookingEnd = new Date(booking.checkOut);
                        // Check for overlap
                        return (searchStart < bookingEnd && searchEnd > bookingStart);
                    });
                    return !conflictingBooking;
                });

                this.filteredRooms = available;
            },
            openBookingModal(room) {
                 if (!this.search.checkIn || !this.search.checkOut) {
                    alert('Please select your dates in the form above before booking.');
                    // Scroll to form
                    document.getElementById('booking-form').scrollIntoView({ behavior: 'smooth' });
                    return;
                }
                this.selectedRoom = room;
                this.isModalVisible = true;
            },
            closeBookingModal() {
                this.isModalVisible = false;
                this.selectedRoom = null;
                this.bookingDetails = { name: '', email: '' };
                this.bookingSuccess = false; // Reset success state
            },
            calculateTotalPrice() {
                if (!this.search.checkIn || !this.search.checkOut || !this.selectedRoom) return 0;
                const start = new Date(this.search.checkIn);
                const end = new Date(this.search.checkOut);
                const nights = Math.ceil((end - start) / (1000 * 60 * 60 * 24));
                return nights * this.selectedRoom.price;
            },
            finalizeBooking() {
                const newBooking = {
                    bookingId: Date.now(),
                    roomId: this.selectedRoom.id,
                    checkIn: this.search.checkIn,
                    checkOut: this.search.checkOut,
                    guests: this.search.guests,
                    customerName: this.bookingDetails.name,
                    customerEmail: this.bookingDetails.email
                };

                Database.saveBooking(newBooking);
                this.bookings.push(newBooking); // Update local state
                this.bookingSuccess = true;
                
                // Refresh the room list to reflect new availability
                this.searchAvailability();
            }
        },
        created() {
            // Load all data from our simulated database on app start
            this.allRooms = Database.getRooms();
            this.bookings = Database.getBookings();
            this.filteredRooms = [...this.allRooms]; // Initially show all rooms
        }
    });

    app.mount('#app');
</script>
</body>
</html>

